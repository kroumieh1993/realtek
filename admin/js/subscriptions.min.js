!function(a){"use strict";a(function(){var b,c,d=EstatikSubscription.tr;a(document).on("submit",".js-es-plan-form",function(){var b=a(this),c=b.find(".js-es-save-plan");return c.prop("disabled","disabled").addClass("es-preload"),a.post(ajaxurl,a(this).serialize(),function(a){if(a.message&&Estatik_Admin.renderNotification(a.message),a.id){var c=new URL(window.location);c.searchParams.set("plan_id",a.id),window.history.pushState({},"",c.toString()),b.find(".js-es-plan-id").val(a.id)}},"json").fail(function(){Estatik_Admin.renderNotification("<div class='es-notification es-notification--error'>Saving error. Please, contact estatik support.</div>")}).always(function(){c.removeProp("disabled").removeAttr("disabled").removeClass("es-preload"),a("html,body").animate({scrollTop:0},"slow")}),!1}),a(".js-es-plan-name").change(function(){var c=a("#es-field-main_button");a(this).val()&&(void 0===b&&(b=+c.val().length),b||c.val("Buy "+a(this).val()))}),a(".js-es-is-limited").change(function(){var b=a(a(this).data("field"));+a(this).val()?(b.removeClass("es-hidden"),b.find("input").removeProp("disabled").removeAttr("disabled")):(b.addClass("es-hidden"),b.find("input").prop("disabled","disabled").attr("disabled","disabled"))}),a(".js-es-is-limited:checked").trigger("change"),a(".js-es-plans-table tbody").sortable({update:function(b,d){var e=a(b.target),f={action:"es_save_plans_order",ordered_ids:[],_wpnonce:EstatikSubscription.nonces.save_plans_order};e.find("tr").each(function(){var b=a(this);f.ordered_ids.push(b.data("plan-id"))}),c&&c.abort(),c=a.post(ajaxurl,f,function(a){a=a||{},a.message&&Estatik_Admin.renderNotification(a.message)},"json").fail(function(){}).always(function(){})}}),a(document).on("click",".js-es-confirm-delete",function(b){b.preventDefault(),a.estatikPopup({inline_html:"<p class='es-center es-popup-text'>"+a(this).data("message")+"</p><div class='es-popup__buttons es-center'><button class='js-es-popup__close es-btn es-btn es-btn--link'>"+d.cancel+"</button><a href='"+a(this).prop("href")+"' class='js-es-fields-builder-remove-section es-btn es-btn--secondary'>"+d.remove+"</a></div>"}).open()})})}(jQuery);